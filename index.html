<!DOCTYPE html>
<html>
	<head>
		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<title>Go Database!</title>
	</head>
	<body data-spy="scroll" data-target="#sidebar">
		<div class="row">
			<div id="sidebar" class="span3">
				<ul class="nav nav-list affix">
					<li><a href="#overview">Overview</a></li>
					<li><a href="#namespace">Namespace</a></li>
					<li><a href="#structure">Structure</a></li>
					<li><a href="#persistence">Persistence</a></li>
					<li><a href="#routing">Routing</a></li>
					<li><a href="#responsibility">Responsibility</a></li>
					<li><a href="#redundancy">Redundancy</a></li>
					<li><a href="#timestamps">Timestamps</a></li>
					<li><a href="#synchronization">Synchronization</a></li>
					<li><a href="#cleaning">Cleaning</a></li>
					<li><a href="#migration">Migration</a></li>
				</ul>
			</div>
			<div class="span9">
				<h1>Go Database!</h1>
				<h2 id="overview">Overview</h2>
				<p>
				Go Database is a scalable, performant, persistence in memory data structure server. It allows massively distributed applications to update and fetch common data in a structured and sorted format.
				</p>
				<p>
				Its main inspirations are <a href="http://redis.io/">Redis</a> and <a href="http://en.wikipedia.org/wiki/Chord_(peer-to-peer)">Chord</a>/<a href="http://pdos.csail.mit.edu/papers/dhash:nsdi/paper.pdf">DHash</a>.
				From <a href="http://redis.io/">Redis</a> it lends a focus on performance, ease of use and small and, simple yet powerful feature set, 
				while from the <a href="http://en.wikipedia.org/wiki/Chord_(peer-to-peer)">Chord</a>/<a href="http://pdos.csail.mit.edu/papers/dhash:nsdi/paper.pdf">DHash</a> projects comes the
				scalability, redundance and transparent failover behaviour.
				<h2 id="namespace">Namespace</h2>
				<h3>Chord circle</h3>
				<object data="chord-circle.svg" type="image/svg+xml"></object>
				<p>The namespace of Go Database, as for the <a href="http://en.wikipedia.org/wiki/Chord_(peer-to-peer)">Chord</a> project, is a conceptual circle where each actor, be it database node or data item, has a position. Usually the circle overflows at the maximum value for a selected hash function used to spread keys over the namespace.</p>
				<h3>Murmur</h3>
				<p>The hash function used in Go Database is <a href="http://code.google.com/p/smhasher/wiki/MurmurHash3">MurmurHash3</a>, a fairly new and extremely fast hash function. Unlike other hash functions it makes no cryptographical claims, but focuses solely on speed and distribution.</p>
				<p>Go Database contains a slightly modified (only to let it compile in a C compiler) of the 128 bit, x64 version of <a href="http://code.google.com/p/smhasher/wiki/MurmurHash3">MurmurHash3</a> wrapped in a thin layer of Go.</p>
				<h3>Hashed vs non hashed keys</h3>
				<p>The main reason to hash keys before inserting them into the namespace is to avoid concentrating keys in a part of the circle, to facilitate letting all nodes share as equal an amount of data as possible.</p>
				<p>However, since it could be very useful for users of a database to store ordered data, or to wilfully concentrate certain data on certain parts of the cluster, Go Database does not force the user to hash the keys.</p>
				<p>Instead, the nodes in Go Database are able to migrate along the circle to hand off data to one another when an imbalance is detected.</p>
				<p>This would allow, for example, data for a geographical region to be prefixed with a code, and making data with that prefix go on designated servers placed in the same geographical region. The cluster could also be configured so that all backups for data positioned in one region was positioned in other regions for greated safety in the face of disasters of different kinds.</p>
				<p>Currently there is no option to either limit node migrations (to force nodes in one datacenter to stay in one part of the namespace), or to force backups to live on nodes in other datacenters, but it would be fairly easy, conceptually, to add in a future version if the need was felt.</p>
				<h2 id="structure">Structure</h2>
				<h3>Byte values</h3>
				<h3>Sub trees</h3>
				<h3>Mirror trees</h3>
				<h2 id="persistence">Persistence</h2>
        <h3>Logfiles</h3>
				<h3>Snapshots</h3>
				<h3>Automatic snapshotting</h3>
				<h2 id="routing">Routing</h2>
				<h3>Notify</h3>
				<h3>Ping</h3>
				<h2 id="responsibility">Responsibility</h2>
        <h3>Successors</h3>
				<h2 id="redundancy">Redundancy</h2>
        <h3>N successive backups</h3>
				<h2 id="timestamps">Timestamps</h2>
				<h3>Zombies</h3>
				<h3>Undone changes</h3>
				<h3>Time network</h3>
				<h2 id="synchronization">Synchronization</h2>
				<h3>Merkle trees</h3>
				<h3>Comparing hashes</h3>
				<h2 id="cleaning">Cleaning</h2>
				<h3>Destructive synchronization</h3>
				<h2 id="migration">Migration</h2>
				<h3>Imbalance</h3>
				<h3>Changing positions</h3>
			</div>
		</div>
	</body>
</html>
